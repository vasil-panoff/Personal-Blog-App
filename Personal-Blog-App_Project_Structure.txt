1️⃣ Folder Structure
personal_blog/
├─ app.py             # Flask application
├─ venv/              # Python virtual environment
├─ templates/         # HTML templates
│   └─ index.html
├─ static/            # CSS, JS, images
│   └─ style.css
├─ requirements.txt   # Python dependencies
└─ personal_blog.service (optional local copy)


app.py example:

from flask import Flask, render_template

app = Flask(__name__)

@app.route("/")
def home():
    return render_template("index.html")

if __name__ == "__main__":
    app.run()


requirements.txt example:

Flask==2.3.0
boto3==1.40.19
gunicorn==23.0.0

2️⃣ Setup Virtual Environment and Install Dependencies
# Create venv
python3 -m venv venv

# Activate
source venv/bin/activate

# Install dependencies
pip install -r requirements.txt

3️⃣ Gunicorn Systemd Service

File: /etc/systemd/system/personal_blog.service

[Unit]
Description=Gunicorn instance to serve personal_blog
After=network.target

[Service]
User=ec2-user
Group=ec2-user
WorkingDirectory=/home/ec2-user/personal_blog
Environment="PATH=/home/ec2-user/personal_blog/venv/bin"
ExecStart=/home/ec2-user/personal_blog/venv/bin/gunicorn -w 4 -b 127.0.0.1:8000 app:app

[Install]
WantedBy=multi-user.target


Commands:

sudo systemctl daemon-reload
sudo systemctl enable personal_blog
sudo systemctl start personal_blog
sudo systemctl status personal_blog

4️⃣ Nginx Configuration

File: /etc/nginx/conf.d/personal_blog.conf

server {
    listen 80;
    server_name 3.127.185.0;  # Replace with public IP or domain

    location / {
        proxy_pass http://127.0.0.1:8000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }

    access_log /var/log/nginx/personal_blog_access.log;
    error_log /var/log/nginx/personal_blog_error.log;
}


Commands:

sudo nginx -t
sudo systemctl restart nginx
sudo systemctl enable nginx

5️⃣ Useful Commands

Check Gunicorn service:

sudo systemctl status personal_blog


Start/Stop/Restart Gunicorn:

sudo systemctl start personal_blog
sudo systemctl stop personal_blog
sudo systemctl restart personal_blog


Check Nginx logs:

tail -f /var/log/nginx/personal_blog_error.log
tail -f /var/log/nginx/personal_blog_access.log


Test locally:

curl http://127.0.0.1:8000


Test public IP:
Open in browser: http://3.127.185.0/

6️⃣ Quick Notes

Make sure your security group allows inbound port 80 (HTTP).

Gunicorn runs internally on 127.0.0.1:8000; Nginx proxies to it.

All Python packages must be installed inside the venv.

Server will automatically start Gunicorn on reboot.